import{g as A,j as J,c as T,o as B,n as u,k as K,a as _,t as D,l as O,v as Q,m as g,p as S,_ as N,q as X,r as v,s as Y,b as $,w as H,d as L}from"./3C51MTGU.js";import{_ as Z}from"./DZU77wZ3.js";const ee=["min","max","step"],se=A({__name:"inputSlider",props:{modelValue:{},min:{},max:{},step:{default:1},label:{default:""}},emits:["update:modelValue"],setup(U,{emit:r}){const o=U,l=r,c=J({get:()=>o.modelValue,set:e=>l("update:modelValue",e)});return(e,d)=>(B(),T("div",{class:u(e.$style.UiInputSlider)},[e.label?(B(),T("p",{key:0,class:u(e.$style.label)},D(e.$props.label),3)):K("",!0),_("div",{class:u(e.$style.wrapper)},[_("div",{class:u(e.$style.min)},D(e.min),3),O(_("input",{"onUpdate:modelValue":d[0]||(d[0]=i=>S(c)?c.value=i:null),class:u(e.$style.slider),type:"range",min:e.min,max:e.max,step:e.step,onInput:d[1]||(d[1]=i=>l("update:modelValue",i.target.valueAsNumber))},null,42,ee),[[Q,g(c),void 0,{number:!0}]]),_("div",{class:u(e.$style.value)},D(g(c)),3),_("div",{class:u(e.$style.max)},D(e.max),3)],2)],2))}}),te="_UiInputSlider_1qtcp_8",le="_label_1qtcp_12",ne="_wrapper_1qtcp_18",ae="_slider_1qtcp_25",oe="_min_1qtcp_57",ie="_max_1qtcp_57",ue="_value_1qtcp_76",re={UiInputSlider:te,label:le,wrapper:ne,slider:ae,min:oe,max:ie,value:ue},de={$style:re},ce=N(se,[["__cssModules",de]]),me=["width","height"],pe=A({__name:"mosaic",props:{images:{},options:{default:()=>({})}},setup(U){const r=U,o={width:768,height:512,rows:10,cols:10,delay:1e3,duration:2e3,...r.options};X(()=>{var n,t,a,y,V;o.rows=((n=r.options)==null?void 0:n.rows)||10,o.cols=((t=r.options)==null?void 0:t.cols)||10,o.delay=((a=r.options)==null?void 0:a.delay)===0?0:((y=r.options)==null?void 0:y.delay)||1e3,o.duration=((V=r.options)==null?void 0:V.duration)||2e3});const l=v(null),c=v(null),e=v(null),d=v(0),i=v(null),h=v(null),m=v(!1),z=n=>new Promise(t=>{const a=new Image;a.onload=()=>t(a),a.src=n}),W=async()=>{var n;l.value&&(i.value=l.value.getContext("2d"),h.value=await z(r.images[d.value]),(n=i.value)==null||n.drawImage(h.value,0,0,l.value.width,l.value.height))},R=(n,t,a)=>{if(!l.value)return[];const y=l.value.width/a,V=l.value.height/t,k=[];for(let f=0;f<t;f++)for(let I=0;I<a;I++){const x=I*n.width/a,q=f*n.height/t,p=n.width/a,M=n.height/t,s=I*y,b=f*V,w=y,C=V;k.push({sx:x,sy:q,sw:p,sh:M,dx:s,dy:b,dw:w,dh:C})}return k},G=async n=>{if(m.value||!h.value)return;m.value=!0;const t=h.value,a=await z(r.images[n]),y=R(t,o.rows,o.cols),k=[...R(a,o.rows,o.cols)].sort(()=>Math.random()-.5),f=[];for(let p=0;p<y.length;p++){const M=y[p],s=k[p],b=Math.random()*o.delay;f.push({s:M,t:s,delay:b})}const I=o.duration+Math.max(...f.map(p=>p.delay),0);let x=null;const q=p=>{if(!i.value||!l.value)return;x||(x=p);const M=p-x;if(M>=I){i.value.drawImage(a,0,0,l.value.width,l.value.height),h.value=a,d.value=n,m.value=!1;return}i.value.clearRect(0,0,l.value.width,l.value.height);for(const s of f){const b=M-s.delay;let w=0;b>0&&(w=Math.min(1,b/o.duration));const C=s.s.dx+(s.t.dx-s.s.dx)*w,P=s.s.dy+(s.t.dy-s.s.dy)*w,F=s.s.dw+(s.t.dw-s.s.dw)*w,j=s.s.dh+(s.t.dh-s.s.dh)*w;i.value.save(),i.value.globalAlpha=1-w,i.value.drawImage(t,s.s.sx,s.s.sy,s.s.sw,s.s.sh,C,P,F,j),i.value.globalAlpha=w,i.value.drawImage(a,s.t.sx,s.t.sy,s.t.sw,s.t.sh,C,P,F,j),i.value.restore()}requestAnimationFrame(q)};requestAnimationFrame(q)},E=n=>{const t=n==="next"?1:-1,a=(d.value+t+r.images.length)%r.images.length;G(a)};return Y(()=>{W()}),(n,t)=>{const a=Z;return B(),T("div",{class:u(n.$style.SliderMosaic)},[_("canvas",{ref_key:"canvas",ref:l,width:o.width,height:o.height,class:u(n.$style.canvas)},null,10,me),_("div",{class:u(n.$style.controls)},[$(a,{ref_key:"prevBtn",ref:c,onClick:t[0]||(t[0]=y=>E("prev"))},{default:H(()=>t[2]||(t[2]=[L(" ⟵ ")])),_:1},512),$(a,{ref_key:"nextBtn",ref:e,onClick:t[1]||(t[1]=y=>E("next"))},{default:H(()=>t[3]||(t[3]=[L(" ⟶ ")])),_:1},512)],2)],2)}}}),ve="_SliderMosaic_14zwy_8",ye="_canvas_14zwy_14",ge="_controls_14zwy_21",_e={SliderMosaic:ve,canvas:ye,controls:ge},we={$style:_e},fe=N(pe,[["__cssModules",we]]),he=A({__name:"slider",setup(U){const r=v(10),o=v(10),l=v(1e3),c=v(1e3);return(e,d)=>{const i=ce,h=fe;return B(),T("div",{class:u([e.$style.SliderPage,"page"])},[_("div",{class:u([e.$style.container,"container"])},[_("div",{class:u(e.$style.aside)},[$(i,{modelValue:g(r),"onUpdate:modelValue":d[0]||(d[0]=m=>S(r)?r.value=m:null),class:u(e.$style.slider),min:1,max:50,label:"Tiles Rows"},null,8,["modelValue","class"]),$(i,{modelValue:g(o),"onUpdate:modelValue":d[1]||(d[1]=m=>S(o)?o.value=m:null),class:u(e.$style.slider),min:1,max:50,label:"Tiles Columns"},null,8,["modelValue","class"]),$(i,{modelValue:g(l),"onUpdate:modelValue":d[2]||(d[2]=m=>S(l)?l.value=m:null),class:u(e.$style.slider),min:0,max:5e3,step:100,label:"Tile Animation Delay (ms)"},null,8,["modelValue","class"]),$(i,{modelValue:g(c),"onUpdate:modelValue":d[3]||(d[3]=m=>S(c)?c.value=m:null),class:u(e.$style.slider),min:100,max:5e3,step:100,label:"Animation Duration (ms)"},null,8,["modelValue","class"])],2),_("div",{class:u(e.$style.content)},[$(h,{images:["../img/catDefault1.png","../img/catDefault2.png","../img/catDefault3.png"],options:{rows:g(r),cols:g(o),delay:g(l),duration:g(c)}},null,8,["options"])],2)],2)],2)}}}),$e="_container_1iwgy_8",Ve="_content_1iwgy_18",Ie="_aside_1iwgy_28",Me={container:$e,content:Ve,aside:Ie},be={$style:Me},Ue=N(he,[["__cssModules",be]]);export{Ue as default};
